<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Conecta Idoso - Perfil</title>
  <link rel="stylesheet" href="estilo.css">
</head>
<body class="pagina-perfil">
  <div class="caixa">
    <!-- Cabe√ßalho -->
    <div class="cabecalho">
      <button class="btn-voltar" onclick="voltarPainel()">Voltar</button>
      <img src="assets/logos/logo-pequena.jpeg" alt="Conecta Idoso" class="logo">
      <button class="btn-sair" onclick="window.location.href='login.html'">Sair</button>
    </div>

    <!-- Conte√∫do principal -->
    <div class="conteudo-perfil">
      <h2>Perfil Cadastrado</h2>

      <!-- Bloco do Idoso -->
      <div class="bloco-perfil bloco-idoso">
        <h3>üë¥ Informa√ß√µes do Idoso</h3>
        <label>Nome:</label>
        <input type="text" id="nomeIdosoPerfil" disabled>

        <label>Telefone:</label>
        <input type="text" id="telefoneIdosoPerfil" disabled>

        <label>Endere√ßo:</label>
        <input type="text" id="enderecoIdosoPerfil" disabled>
      </div>

      <!-- Bloco do Administrador -->
      <div class="bloco-perfil bloco-admin">
        <h3>üë§ Informa√ß√µes do Administrador</h3>
        <label>Nome:</label>
        <input type="text" id="nomeAdmPerfil" disabled>

        <label>Telefone:</label>
        <input type="text" id="telefoneAdmPerfil" disabled>

        <label>Endere√ßo:</label>
        <input type="text" id="enderecoAdmPerfil" disabled>
      </div>

      <!-- Bot√µes -->
      <div class="acoes-perfil">
        <button class="btn-editar" id="btnEditar" onclick="editarInformacoes()">Editar Informa√ß√µes</button>
        <button class="btn-salvar" id="btnSalvar" style="display:none;" onclick="salvarInformacoes()">Salvar Altera√ß√µes</button>
      </div>
    </div>
  </div>

  <script>
    // Fun√ß√£o de voltar inteligente
    function voltarPainel() {
      const isAdmin = localStorage.getItem("isAdmin") === "true";
      if (isAdmin) {
        window.location.href = "painel-adm.html";
      } else {
        window.location.href = "painel.html";
      }
    }

    // Carrega dados do localStorage
    window.onload = () => {
      document.getElementById("nomeIdosoPerfil").value = localStorage.getItem("nomeIdoso") || "";
      document.getElementById("telefoneIdosoPerfil").value = localStorage.getItem("telefoneIdoso") || "";
      document.getElementById("enderecoIdosoPerfil").value = localStorage.getItem("enderecoIdoso") || "";

      document.getElementById("nomeAdmPerfil").value = localStorage.getItem("nomeAdm") || "";
      document.getElementById("telefoneAdmPerfil").value = localStorage.getItem("telefoneAdm") || "";
      document.getElementById("enderecoAdmPerfil").value = localStorage.getItem("enderecoAdm") || "";
    };

    // Habilita edi√ß√£o
    function editarInformacoes() {
      document.querySelectorAll(".bloco-perfil input").forEach(input => input.disabled = false);
      document.getElementById("btnEditar").style.display = "none";
      document.getElementById("btnSalvar").style.display = "inline-block";
    }

    // Salva altera√ß√µes
    function salvarInformacoes() {
      localStorage.setItem("nomeIdoso", document.getElementById("nomeIdosoPerfil").value);
      localStorage.setItem("telefoneIdoso", document.getElementById("telefoneIdosoPerfil").value);
      localStorage.setItem("enderecoIdoso", document.getElementById("enderecoIdosoPerfil").value);
      localStorage.setItem("nomeAdm", document.getElementById("nomeAdmPerfil").value);
      localStorage.setItem("telefoneAdm", document.getElementById("telefoneAdmPerfil").value);
      localStorage.setItem("enderecoAdm", document.getElementById("enderecoAdmPerfil").value);

      document.querySelectorAll(".bloco-perfil input").forEach(input => input.disabled = true);
      document.getElementById("btnEditar").style.display = "inline-block";
      document.getElementById("btnSalvar").style.display = "none";

      alert("Informa√ß√µes atualizadas com sucesso!");
    }
  </script>
</body>
</html>
